<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>네이버 지도와 검색창</title>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=93gqruosnz"></script>
    <style>
        #mapContainer {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }

        #searchBox {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        #map {
            width: 100%;
            height: calc(100vh - 40px);
        }

        #toggleBtn {
            width: 50px;
            height: 50px;
            background-color: lightgreen;
            border: none;
            border-radius: 50%;
            font-size: 30px;
            line-height: 40px;
            cursor: pointer;
            position: fixed;
            bottom: 10px;
            left: calc(50% - 25px);
            transition: background-color 0.3s ease, bottom 0.5s ease;
        }

        #toggleBtn:hover {
            background-color: lightyellow;
        }

        .container-column {
            width: 33.333%;
            height: 200px;
            background-color: lightblue;
            position: fixed;
            left: 0;
            transition: bottom 0.5s ease, transform 0.5s ease;
            text-align: center;
            overflow: hidden;
        }

        #container1 {
            bottom: -200px;
            z-index: 999;
        }

        #container2 {
            bottom: -200px;
            left: 33.333%;
            z-index: 998;
        }

        #container3 {
            bottom: -200px;
            left: 66.666%;
            z-index: 997;
        }

        .popup-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            width: 80%;
            max-width: 600px;
            text-align: left;
        }

        .close-btn {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            float: right;
        }
    </style>
</head>
<body>
<div id="mapContainer">
    <div id="searchBox">
        <input type="text" id="searchInput" placeholder="장소를 검색하세요">
        <button id="searchBtn">검색</button>
    </div>
    <div id="map"></div>
</div>
<button id="toggleBtn">⇧⇧</button>
<div id="container1" class="container-column">
    <ul>
        <li><a href="#">한식</a></li>
        <li><a href="#">중식</a></li>
        <li><a href="#">양식</a></li>
        <li><a href="#">디저트</a></li>
    </ul>
</div>
<div id="container2" class="container-column">
    <ul id="container2List">
        <!-- Dynamic content will be inserted here -->
    </ul>
</div>
<div id="container3" class="container-column">
    <h3>피드백</h3>
    <form id="feedbackForm">
        <textarea id="feedbackText" placeholder="의견을 남겨주세요" rows="4" cols="50"></textarea>
        <br>
        <button type="submit">제출</button>
    </form>
</div>
<div id="popup" class="popup">
    <div class="popup-content">
        <button class="close-btn" onclick="closePopup()">Close</button>
        <div id="popupContent">Popup Content</div>
    </div>
</div>

<script>
    // 클릭 이벤트를 감지하여 container2의 내용을 변경하는 함수
    function changeContainerContent(content) {
        // container2의 내용을 변경합니다.
        var container2List = document.getElementById('container2List');
        container2List.innerHTML = content;
    }

    // container1의 링크 클릭 이벤트를 처리하는 함수
    function handleLinkClick(event) {
        event.preventDefault(); // 링크의 기본 동작을 막습니다.
        
        // 클릭된 링크의 텍스트를 가져옵니다.
        var selectedFood = event.target.innerText;

        // container2의 내용을 선택된 음식에 따라 변경합니다.
        switch (selectedFood) {
            case '한식':
                changeContainerContent(`
                    <li><a href="#" id="link1">명장국밥</a></li>
                    <li><a href="#">항목 3</a></li>
                    <li><a href="#">항목 4</a></li>
                    <li><a href="#">항목 5</a></li>
                `);
                break;
            case '중식':
                changeContainerContent(`
                    <li><a href="#" id="link2">사나이 짬뽕</a></li>
                    <li><a href="#">항목 3</a></li>
                    <li><a href="#">항목 4</a></li>
                    <li><a href="#">항목 5</a></li>
                `);
                break;
            case '양식':
                changeContainerContent(`
                    <li><a href="#">양식1</a></li>
                    <li><a href="#">양식2</a></li>
                    <li><a href="#">양식3</a></li>
                    <li><a href="#">양식4</a></li>
                `);
                break;
            case '디저트':
                changeContainerContent(`
                    <li><a href="#">디저트1</a></li>
                    <li><a href="#">디저트2</a></li>
                    <li><a href="#">디저트3</a></li>
                    <li><a href="#">디저트4</a></li>
                `);
                break;
            // 다른 음식 분류에 따라서도 case를 추가할 수 있습니다.
        }
    }
    // container1의 링크에 클릭 이벤트 리스너를 추가합니다.
    var links = document.querySelectorAll('#container1 a');
    links.forEach(function(link) {
        link.addEventListener('click', handleLinkClick);
    });

    var mapOptions = {
        center: new naver.maps.LatLng(36.625316, 127.450883),
        zoom: 15
    };

    var map = new naver.maps.Map('map', mapOptions);

    const toggleBtn = document.getElementById('toggleBtn');
    const containers = [document.getElementById('container1'), document.getElementById('container2'), document.getElementById('container3')];

    toggleBtn.addEventListener('click', function() {
        containers.forEach(container => {
            if (container.style.bottom === '-200px') {
                container.style.bottom = '0';
            } else {
                container.style.bottom = '-200px';
            }
        });

        // 버튼 위치 조정
        if (toggleBtn.style.bottom === '10px') {
            toggleBtn.style.bottom = '210px';
        } else {
            toggleBtn.style.bottom = '10px';
        }
    });

    containers.forEach(container => {
        container.style.transform = 'translateY(0)';
    });

    var markerImage = {
        url: 'https://navermaps.github.io/maps.js/docs/img/example/pin_default.png',
        size: new naver.maps.Size(50, 52),
        origin: new naver.maps.Point(0, 0),
        anchor: new naver.maps.Point(25, 52)
    };

    var marker1 = new naver.maps.Marker({
        position: new naver.maps.LatLng(36.625316, 127.450883),
        map: map,
        icon: markerImage,
        title: '충북대학교'
    });

    var marker2 = new naver.maps.Marker({
        position: new naver.maps.LatLng(36.627111, 127.452823),
        map: map,
        icon: markerImage,
        title: '충북대학교병원'
    });

    var infowindow = new naver.maps.InfoWindow({
        content: '<div style="width:150px;text-align:center;padding:10px;">충북대학교</div>'
    });

    var infowindow2 = new naver.maps.InfoWindow({
        content: '<div style="width:150px;text-align:center;padding:10px;">충북대학교병원</div>'
    });

    naver.maps.Event.addListener(marker1, 'click', function() {
        if (infowindow.getMap()) {
            infowindow.close();
        } else {
            infowindow.open(map, marker1);
        }
    });

    naver.maps.Event.addListener(marker2, 'click', function() {
        if (infowindow2.getMap()) {
            infowindow2.close();
        } else {
            infowindow2.open(map, marker2);
        }
    });

    function openPopup(content) {
        document.getElementById('popupContent').innerHTML = content;
        document.getElementById('popup').style.display = 'block';
    }

    function closePopup() {
        document.getElementById('popup').style.display = 'none';
    }

    document.getElementById('searchBtn').addEventListener('click', function() {
        const searchInput = document.getElementById('searchInput').value;
        openPopup(searchInput);
    });

    // 사용자 피드백 제출 처리
    document.getElementById('feedbackForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const feedback = document.getElementById('feedbackText').value;
        alert('피드백이 제출되었습니다: ' + feedback);
        document.getElementById('feedbackText').value = ''; // 제출 후 텍스트 영역 초기화
    });

</script>
</body>
</html>
